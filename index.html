<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TOEIC (450-550) set-1 â€“ Boo-riculum</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root { --ink:#222; --muted:#444; --accent:#0b78ff; --ok:#22c55e; --bad:#ef4444; }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:url('Booha card.jpg') center/cover fixed no-repeat;
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 24px;}
    header{
      display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
      margin-bottom:12px;background:rgba(255,255,255,0.88);padding:12px 16px;
      border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.15)
    }
    header h1{
      font-size:18px;margin:0;font-weight:800;letter-spacing:.3px;
      background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      display:flex;align-items:center;gap:8px
    }
    header h1 img{height:28px;width:auto;}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,button{
      background:rgba(255,255,255,0.95);color:var(--ink);border:1px solid #ccc;
      border-radius:12px;padding:10px 12px;font-size:14px;
      box-shadow:0 2px 5px rgba(0,0,0,0.08)
    }
    button{cursor:pointer;transition:transform .05s ease, background .2s}
    button:hover{background:#f0f0f0}
    button:active{transform:scale(.98)}
    .pill{border:1px solid #ccc;border-radius:999px;padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.7)}
    .card{
      user-select:none;-webkit-user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;background:url('Booha card.jpg') center/cover no-repeat;
      border:1px solid #ccc;border-radius:24px;min-height:56vh;margin:16px auto;padding:22px 18px 28px;
      box-shadow:0 10px 40px rgba(0,0,0,.25); position:relative;
    }
    .brand{
      position:absolute;top:10px;left:12px;display:flex;gap:8px;align-items:center;
      background:rgba(255,255,255,0.85);padding:6px 10px;border-radius:12px;border:1px solid #ddd;
      box-shadow:0 2px 6px rgba(0,0,0,0.08); font-weight:800; letter-spacing:.2px;
    }
    .brand img{height:20px;width:auto}
    .brand span{background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;margin-bottom:8px;
      background:rgba(255,255,255,0.7);padding:4px 8px;border-radius:8px}
    .main{font-size:28px;line-height:1.25;font-weight:800;margin:8px 0 10px;
      background:rgba(255,255,255,0.86);padding:8px 12px;border-radius:12px}
    .sub{font-size:18px;opacity:.92;margin:0 0 6px;background:rgba(255,255,255,0.65);
      padding:4px 10px;border-radius:8px}
    .hira{font-size:18px;color:var(--accent);opacity:.95;background:rgba(255,255,255,0.75);
      padding:4px 10px;border-radius:8px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .footer{
      display:flex;align-items:center;justify-content:space-between;margin-top:8px;color:var(--muted);font-size:13px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)
    }
    .progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);width:0%}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));} .main{font-size:24px}}
    a{color:#0b78ff;text-decoration:none}
    .hidden{display:none}
    .options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .optbtn{border:1px solid #ccc;border-radius:12px;padding:10px 14px;background:rgba(255,255,255,0.95);cursor:pointer}
    .optbtn.ok{background:#dcfce7;border-color:#86efac;color:#166534}
    .optbtn.bad{background:#fee2e2;border-color:#fca5a5;color:#991b1b}
    .small{font-size:15px; line-height:1.45;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><img src="booha-ghost.png" alt="Booha ghost"> Boo-riculum â€“ TOEIC (450-550) set-1</h1>
      <div class="controls">
        <select id="mode" aria-label="Mode">
          <option value="vocab-j2e">Vocab: ğŸ‡¯ğŸ‡µ â†’ ğŸ‡ºğŸ‡¸</option>
          <option value="vocab-e2j">Vocab: ğŸ‡ºğŸ‡¸ â†’ ğŸ‡¯ğŸ‡µ</option>
          <option value="sentences">Sentences (practice)</option>
          <option value="qa">Questions (practice)</option>
          <option value="quiz">Quiz (multiple choice)</option>
          <option value="reading">Reading</option>
        </select>
      </div>
    </header>

    <div id="card" class="card" role="button" aria-label="flashcard" tabindex="0">
      <div class="brand"><img src="booha-ghost.png" alt="Booha ghost"><span>Boo-riculum</span></div>
      <div id="label" class="label">Front</div>
      <div id="main" class="main">â€”</div>
      <div id="sub" class="sub muted">Tap or press Space to flip</div>
      <div id="hira" class="hira hidden"></div>
      <div id="mcArea" class="options hidden"></div>
    </div>

    <div class="footer">
      <div class="row">
        <span class="pill" title="Left / Right keys">Keyboard: â† â†’</span>
        <span class="pill" title="Space to flip">Space = Flip</span>
        <button id="btnPrev" title="â† or swipe right">â—€ï¸ Prev</button>
        <button id="btnFlip" title="Tap / Space">Flip</button>
        <button id="btnNext" title="â†’ or swipe left">Next â–¶ï¸</button>
        <button id="btnShuffle" title="Shuffle deck">Shuffle</button>
      </div>
      <div style="min-width:180px;text-align:right">
        <div id="counter" class="muted">0 / 0</div>
        <div class="progress" aria-hidden="true"><span id="bar"></span></div>
      </div>
    </div>
  </div>

  <script>
    // ---------------- Data (TOEIC 450â€“550) ----------------
    const VOCAB = [
      { en:'invoice', ja:'è«‹æ±‚æ›¸', hira:'ã›ã„ãã‚…ã†ã—ã‚‡' },
      { en:'schedule', ja:'äºˆå®š', hira:'ã‚ˆã¦ã„' },
      { en:'appointment', ja:'äºˆç´„', hira:'ã‚ˆã‚„ã' },
      { en:'deadline', ja:'ç· ã‚åˆ‡ã‚Š', hira:'ã—ã‚ãã‚Š' },
      { en:'shipment', ja:'å‡ºè·', hira:'ã—ã‚…ã£ã‹' },
      { en:'to confirm', ja:'ç¢ºèªã™ã‚‹', hira:'ã‹ãã«ã‚“ã™ã‚‹' },
      { en:'to reschedule', ja:'äºˆå®šã‚’å¤‰æ›´ã™ã‚‹', hira:'ã‚ˆã¦ã„ã‚’ ã¸ã‚“ã“ã†ã™ã‚‹' },
      { en:'department', ja:'éƒ¨ç½²', hira:'ã¶ã—ã‚‡' },
      { en:'supervisor', ja:'ä¸Šå¸', hira:'ã˜ã‚‡ã†ã—' },
      { en:'conference room', ja:'ä¼šè­°å®¤', hira:'ã‹ã„ãã—ã¤' },
      { en:'to attach (file)', ja:'æ·»ä»˜ã™ã‚‹', hira:'ã¦ã‚“ã·ã™ã‚‹' },
      { en:'refund', ja:'è¿”é‡‘', hira:'ã¸ã‚“ãã‚“' },
      { en:'discount', ja:'å‰²å¼•', hira:'ã‚ã‚Šã³ã' },
      { en:'brochure', ja:'ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆ', hira:'ã±ã‚“ãµã‚Œã£ã¨' },
      { en:'maintenance', ja:'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹', hira:'ã‚ã‚“ã¦ãªã‚“ã™' },
      { en:'supplier', ja:'ç´å…¥æ¥­è€…', hira:'ã®ã†ã«ã‚…ã† ãã‚‡ã†ã—ã‚ƒ' },
      { en:'company policy', ja:'ä¼šç¤¾ã®è¦å®š', hira:'ã‹ã„ã—ã‚ƒã® ãã¦ã„' },
      { en:'feedback', ja:'ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯', hira:'ãµãƒãƒ¼ã©ã°ã£ã' },
    ];

    const SENTENCES = [
      { en:'Please send the invoice by Friday.', ja:'é‡‘æ›œæ—¥ã¾ã§ã«è«‹æ±‚æ›¸ã‚’é€ã£ã¦ãã ã•ã„ã€‚', hira:'ãã‚“ã‚ˆã†ã³ ã¾ã§ã« ã›ã„ãã‚…ã†ã—ã‚‡ã‚’ ãŠãã£ã¦ ãã ã•ã„ã€‚' },
      { en:'The deadline was extended by two days.', ja:'ç· ã‚åˆ‡ã‚Šã¯2æ—¥å»¶é•·ã•ã‚Œã¾ã—ãŸã€‚', hira:'ã—ã‚ãã‚Šã¯ ãµã¤ã‹ ãˆã‚“ã¡ã‚‡ã† ã•ã‚Œã¾ã—ãŸã€‚' },
      { en:'We reserved the conference room at 3 p.m.', ja:'åˆå¾Œ3æ™‚ã«ä¼šè­°å®¤ã‚’äºˆç´„ã—ã¾ã—ãŸã€‚', hira:'ã”ã” ã•ã‚“ã˜ã« ã‹ã„ãã—ã¤ã‚’ ã‚ˆã‚„ã ã—ã¾ã—ãŸã€‚' },
      { en:'I attached the brochure to the email.', ja:'ãƒ¡ãƒ¼ãƒ«ã«ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’æ·»ä»˜ã—ã¾ã—ãŸã€‚', hira:'ã‚ãƒ¼ã‚‹ã« ã±ã‚“ãµã‚Œã£ã¨ã‚’ ã¦ã‚“ã· ã—ã¾ã—ãŸã€‚' },
      { en:'Our supplier will ship the parts tomorrow.', ja:'ç´å…¥æ¥­è€…ã¯æ˜æ—¥éƒ¨å“ã‚’å‡ºè·ã—ã¾ã™ã€‚', hira:'ã®ã†ã«ã‚…ã† ãã‚‡ã†ã—ã‚ƒã¯ ã‚ã—ãŸ ã¶ã²ã‚“ã‚’ ã—ã‚…ã£ã‹ ã—ã¾ã™ã€‚' },
      { en:'Could you confirm the schedule with your supervisor?', ja:'ä¸Šå¸ã¨äºˆå®šã‚’ç¢ºèªã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ã€‚', hira:'ã˜ã‚‡ã†ã—ã¨ ã‚ˆã¦ã„ã‚’ ã‹ãã«ã‚“ã—ã¦ ã„ãŸã ã‘ã¾ã™ã‹ã€‚' },
      { en:'Maintenance will take about one hour.', ja:'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ã¯ç´„1æ™‚é–“ã‹ã‹ã‚Šã¾ã™ã€‚', hira:'ã‚ã‚“ã¦ãªã‚“ã™ã«ã¯ ã‚„ã ã„ã¡ã˜ã‹ã‚“ ã‹ã‹ã‚Šã¾ã™ã€‚' },
      { en:'We offered a 10% discount to new customers.', ja:'æ–°è¦ã®ãŠå®¢æ§˜ã«10ï¼…ã®å‰²å¼•ã‚’æä¾›ã—ã¾ã—ãŸã€‚', hira:'ã—ã‚“ãã® ãŠãã‚ƒãã•ã¾ã« ã˜ã‚…ã£ã±ãƒ¼ã›ã‚“ã¨ã® ã‚ã‚Šã³ãã‚’ ã¦ã„ãã‚‡ã† ã—ã¾ã—ãŸã€‚' },
      { en:'She asked for a refund because the item was damaged.', ja:'å•†å“ã«å‚·ãŒã‚ã£ãŸãŸã‚ã€å½¼å¥³ã¯è¿”é‡‘ã‚’æ±‚ã‚ã¾ã—ãŸã€‚', hira:'ã—ã‚‡ã†ã²ã‚“ã« ããšãŒ ã‚ã£ãŸãŸã‚ã€ã‹ã®ã˜ã‚‡ã¯ ã¸ã‚“ãã‚“ã‚’ ã‚‚ã¨ã‚ã¾ã—ãŸã€‚' },
      { en:'Letâ€™s reschedule the meeting for next Tuesday.', ja:'ä¼šè­°ã‚’æ¥é€±ã®ç«æ›œæ—¥ã«äºˆå®šå¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚', hira:'ã‹ã„ãã‚’ ã‚‰ã„ã—ã‚…ã†ã® ã‹ã‚ˆã†ã³ã« ã‚ˆã¦ã„ ã¸ã‚“ã“ã† ã—ã¾ã—ã‚‡ã†ã€‚' },
      { en:'Please leave your feedback after the training.', ja:'ç ”ä¿®ã®å¾Œã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚', hira:'ã‘ã‚“ã—ã‚…ã†ã® ã‚ã¨ã« ãµãƒãƒ¼ã©ã°ã£ãã‚’ ãŠã­ãŒã„ã—ã¾ã™ã€‚' },
      { en:'The department will move to the fourth floor.', ja:'éƒ¨ç½²ã¯4éšã«ç§»å‹•ã—ã¾ã™ã€‚', hira:'ã¶ã—ã‚‡ã¯ ã‚ˆã‚“ã‹ã„ã« ã„ã©ã† ã—ã¾ã™ã€‚' },
    ];

    const QA = [
      { q_en:'When do we need to submit the invoice?', q_ja:'ã„ã¤è«‹æ±‚æ›¸ã‚’æå‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã„ã¤ ã›ã„ãã‚…ã†ã—ã‚‡ã‚’ ã¦ã„ã—ã‚…ã¤ã™ã‚‹ ã²ã¤ã‚ˆã†ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'By Friday.', a_ja:'é‡‘æ›œæ—¥ã¾ã§ã§ã™ã€‚', a_hira:'ãã‚“ã‚ˆã†ã³ ã¾ã§ã§ã™ã€‚' },
      { q_en:'Where is the conference room?', q_ja:'ä¼šè­°å®¤ã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã‹ã„ãã—ã¤ã¯ ã©ã“ã« ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'It is on the third floor.', a_ja:'3éšã«ã‚ã‚Šã¾ã™ã€‚', a_hira:'ã•ã‚“ãŒã„ã« ã‚ã‚Šã¾ã™ã€‚' },
      { q_en:'Who will confirm the schedule?', q_ja:'èª°ãŒäºˆå®šã‚’ç¢ºèªã—ã¾ã™ã‹ï¼Ÿ', q_hira:'ã ã‚ŒãŒ ã‚ˆã¦ã„ã‚’ ã‹ãã«ã‚“ ã—ã¾ã™ã‹ï¼Ÿ',
        a_en:'My supervisor will.', a_ja:'ç§ã®ä¸Šå¸ã§ã™ã€‚', a_hira:'ã‚ãŸã—ã® ã˜ã‚‡ã†ã—ã§ã™ã€‚' },
      { q_en:'What did you attach to the email?', q_ja:'ãƒ¡ãƒ¼ãƒ«ã«ä½•ã‚’æ·»ä»˜ã—ã¾ã—ãŸã‹ï¼Ÿ', q_hira:'ã‚ãƒ¼ã‚‹ã« ãªã«ã‚’ ã¦ã‚“ã· ã—ã¾ã—ãŸã‹ï¼Ÿ',
        a_en:'I attached the brochure.', a_ja:'ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’æ·»ä»˜ã—ã¾ã—ãŸã€‚', a_hira:'ã±ã‚“ãµã‚Œã£ã¨ã‚’ ã¦ã‚“ã· ã—ã¾ã—ãŸã€‚' },
      { q_en:'Why was the deadline extended?', q_ja:'ãªãœç· ã‚åˆ‡ã‚ŠãŒå»¶é•·ã•ã‚Œã¾ã—ãŸã‹ï¼Ÿ', q_hira:'ãªãœ ã—ã‚ãã‚ŠãŒ ãˆã‚“ã¡ã‚‡ã† ã•ã‚Œã¾ã—ãŸã‹ï¼Ÿ',
        a_en:'Because the shipment was delayed.', a_ja:'å‡ºè·ãŒé…ã‚ŒãŸã‹ã‚‰ã§ã™ã€‚', a_hira:'ã—ã‚…ã£ã‹ãŒ ãŠãã‚ŒãŸ ã‹ã‚‰ã§ã™ã€‚' },
      { q_en:'How long will maintenance take?', q_ja:'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ã¯ã©ã®ãã‚‰ã„æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã‚ã‚“ã¦ãªã‚“ã™ã«ã¯ ã©ã®ãã‚‰ã„ ã˜ã‹ã‚“ãŒ ã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'About one hour.', a_ja:'ç´„1æ™‚é–“ã§ã™ã€‚', a_hira:'ã‚„ã ã„ã¡ã˜ã‹ã‚“ã§ã™ã€‚' },
      { q_en:'What discount did you offer?', q_ja:'ã©ã®ãã‚‰ã„ã®å‰²å¼•ã‚’æä¾›ã—ã¾ã—ãŸã‹ï¼Ÿ', q_hira:'ã©ã®ãã‚‰ã„ã® ã‚ã‚Šã³ãã‚’ ã¦ã„ãã‚‡ã† ã—ã¾ã—ãŸã‹ï¼Ÿ',
        a_en:'A ten percent discount.', a_ja:'10ï¼…ã®å‰²å¼•ã§ã™ã€‚', a_hira:'ã˜ã‚…ã£ã±ãƒ¼ã›ã‚“ã¨ã® ã‚ã‚Šã³ãã§ã™ã€‚' },
      { q_en:'When will the supplier ship the parts?', q_ja:'ç´å…¥æ¥­è€…ã¯ã„ã¤éƒ¨å“ã‚’å‡ºè·ã—ã¾ã™ã‹ï¼Ÿ', q_hira:'ã®ã†ã«ã‚…ã† ãã‚‡ã†ã—ã‚ƒã¯ ã„ã¤ ã¶ã²ã‚“ã‚’ ã—ã‚…ã£ã‹ ã—ã¾ã™ã‹ï¼Ÿ',
        a_en:'Tomorrow morning.', a_ja:'æ˜æ—¥ã®æœã§ã™ã€‚', a_hira:'ã‚ã—ãŸã® ã‚ã•ã§ã™ã€‚' },
      { q_en:'What floor is the department moving to?', q_ja:'éƒ¨ç½²ã¯ä½•éšã«ç§»å‹•ã—ã¾ã™ã‹ï¼Ÿ', q_hira:'ã¶ã—ã‚‡ã¯ ãªã‚“ãŒã„ã« ã„ã©ã† ã—ã¾ã™ã‹ï¼Ÿ',
        a_en:'The fourth floor.', a_ja:'4éšã§ã™ã€‚', a_hira:'ã‚ˆã‚“ã‹ã„ã§ã™ã€‚' },
      { q_en:'Can we reschedule the meeting?', q_ja:'ä¼šè­°ã®äºˆå®šã‚’å¤‰æ›´ã§ãã¾ã™ã‹ï¼Ÿ', q_hira:'ã‹ã„ãã® ã‚ˆã¦ã„ã‚’ ã¸ã‚“ã“ã† ã§ãã¾ã™ã‹ï¼Ÿ',
        a_en:'Yes, next Tuesday works.', a_ja:'ã¯ã„ã€æ¥é€±ã®ç«æ›œæ—¥ãŒå¤§ä¸ˆå¤«ã§ã™ã€‚', a_hira:'ã¯ã„ã€ã‚‰ã„ã—ã‚…ã†ã® ã‹ã‚ˆã†ã³ãŒ ã ã„ã˜ã‚‡ã†ã¶ã§ã™ã€‚' },
      { q_en:'What does the company policy say?', q_ja:'ä¼šç¤¾ã®è¦å®šã«ã¯ä½•ã¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', q_hira:'ã‹ã„ã—ã‚ƒã® ãã¦ã„ã«ã¯ ãªã«ã¨ ã‹ã„ã¦ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
        a_en:'Employees must submit receipts.', a_ja:'å¾“æ¥­å“¡ã¯é ˜åæ›¸ã‚’æå‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚', a_hira:'ã˜ã‚…ã†ãã‚‡ã†ã„ã‚“ã¯ ã‚Šã‚‡ã†ã—ã‚…ã†ã—ã‚‡ã‚’ ã¦ã„ã—ã‚…ã¤ã™ã‚‹ ã²ã¤ã‚ˆã†ãŒ ã‚ã‚Šã¾ã™ã€‚' },
      { q_en:'Did she receive a refund?', q_ja:'å½¼å¥³ã¯è¿”é‡‘ã‚’å—ã‘å–ã‚Šã¾ã—ãŸã‹ï¼Ÿ', q_hira:'ã‹ã®ã˜ã‚‡ã¯ ã¸ã‚“ãã‚“ã‚’ ã†ã‘ã¨ã‚Šã¾ã—ãŸã‹ï¼Ÿ',
        a_en:'Yes, she did.', a_ja:'ã¯ã„ã€å—ã‘å–ã‚Šã¾ã—ãŸã€‚', a_hira:'ã¯ã„ã€ã†ã‘ã¨ã‚Šã¾ã—ãŸã€‚' },
    ];

    const QUIZ = [
      { cloze:'Please ___ the schedule with your supervisor.', answers:['confirm'], ja:'ä¸Šå¸ã¨äºˆå®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚', hira:'ã˜ã‚‡ã†ã—ã¨ ã‚ˆã¦ã„ã‚’ ã‹ãã«ã‚“ ã—ã¦ãã ã•ã„ã€‚', full:'Please confirm the schedule with your supervisor.' },
      { cloze:'The meeting was ___ to next Tuesday.', answers:['rescheduled'], ja:'ä¼šè­°ã¯æ¥é€±ã®ç«æ›œæ—¥ã«äºˆå®šå¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚', hira:'ã‹ã„ãã¯ ã‚‰ã„ã—ã‚…ã†ã® ã‹ã‚ˆã†ã³ã« ã‚ˆã¦ã„ ã¸ã‚“ã“ã† ã•ã‚Œã¾ã—ãŸã€‚', full:'The meeting was rescheduled to next Tuesday.' },
      { cloze:'Our supplier will ___ the parts tomorrow.', answers:['ship'], ja:'ç´å…¥æ¥­è€…ã¯æ˜æ—¥éƒ¨å“ã‚’å‡ºè·ã—ã¾ã™ã€‚', hira:'ã®ã†ã«ã‚…ã† ãã‚‡ã†ã—ã‚ƒã¯ ã‚ã—ãŸ ã¶ã²ã‚“ã‚’ ã—ã‚…ã£ã‹ ã—ã¾ã™ã€‚', full:'Our supplier will ship the parts tomorrow.' },
      { cloze:'The ___ is at 5 p.m. today.', answers:['deadline'], ja:'ç· ã‚åˆ‡ã‚Šã¯æœ¬æ—¥åˆå¾Œ5æ™‚ã§ã™ã€‚', hira:'ã—ã‚ãã‚Šã¯ ã»ã‚“ã˜ã¤ ã”ã” ã”ã˜ã§ã™ã€‚', full:'The deadline is at 5 p.m. today.' },
      { cloze:'Please find the ___ attached.', answers:['brochure'], ja:'æ·»ä»˜ã®ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’ã”ç¢ºèªãã ã•ã„ã€‚', hira:'ã¦ã‚“ã·ã® ã±ã‚“ãµã‚Œã£ã¨ã‚’ ã”ã‹ãã«ã‚“ ãã ã•ã„ã€‚', full:'Please find the brochure attached.' },
      { cloze:'We offered a ten percent ___.', answers:['discount'], ja:'10ï¼…ã®å‰²å¼•ã‚’æä¾›ã—ã¾ã—ãŸã€‚', hira:'ã˜ã‚…ã£ã±ãƒ¼ã›ã‚“ã¨ã® ã‚ã‚Šã³ãã‚’ ã¦ã„ãã‚‡ã† ã—ã¾ã—ãŸã€‚', full:'We offered a ten percent discount.' },
      { cloze:'She requested a ___.', answers:['refund'], ja:'å½¼å¥³ã¯è¿”é‡‘ã‚’æ±‚ã‚ã¾ã—ãŸã€‚', hira:'ã‹ã®ã˜ã‚‡ã¯ ã¸ã‚“ãã‚“ã‚’ ã‚‚ã¨ã‚ã¾ã—ãŸã€‚', full:'She requested a refund.' },
      { cloze:'The department will ___ to the fourth floor.', answers:['move'], ja:'éƒ¨ç½²ã¯4éšã«ç§»å‹•ã—ã¾ã™ã€‚', hira:'ã¶ã—ã‚‡ã¯ ã‚ˆã‚“ã‹ã„ã« ã„ã©ã† ã—ã¾ã™ã€‚', full:'The department will move to the fourth floor.' },
      { cloze:'Please ___ the file to the email.', answers:['attach'], ja:'ãƒ¡ãƒ¼ãƒ«ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚', hira:'ã‚ãƒ¼ã‚‹ã« ãµãã„ã‚‹ã‚’ ã¦ã‚“ã· ã—ã¦ãã ã•ã„ã€‚', full:'Please attach the file to the email.' },
      { cloze:'Regular ___ will start at noon.', answers:['maintenance'], ja:'é€šå¸¸ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã¯æ­£åˆã«é–‹å§‹ã—ã¾ã™ã€‚', hira:'ã¤ã†ã˜ã‚‡ã†ã® ã‚ã‚“ã¦ãªã‚“ã™ã¯ ã—ã‚‡ã†ã”ã« ã‹ã„ã— ã—ã¾ã™ã€‚', full:'Regular maintenance will start at noon.' },
      { cloze:'He sent the travel ___ last night.', answers:['invoice'], ja:'å½¼ã¯æ˜¨å¤œã€å‡ºå¼µã®è«‹æ±‚æ›¸ã‚’é€ã‚Šã¾ã—ãŸã€‚', hira:'ã‹ã‚Œã¯ ã•ãã‚„ã€ã—ã‚…ã£ã¡ã‚‡ã†ã® ã›ã„ãã‚…ã†ã—ã‚‡ã‚’ ãŠãã‚Šã¾ã—ãŸã€‚', full:'He sent the travel invoice last night.' },
      { cloze:'Please leave your ___ after the training.', answers:['feedback'], ja:'ç ”ä¿®å¾Œã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚', hira:'ã‘ã‚“ã—ã‚…ã†ã”ã« ãµãƒãƒ¼ã©ã°ã£ãã‚’ ãŠã­ãŒã„ã—ã¾ã™ã€‚', full:'Please leave your feedback after the training.' },
    ];

    const READING = [
      { en:'Notice: The elevator will be under maintenance from 12:00 to 13:00.', ja:'ãŠçŸ¥ã‚‰ã›ï¼šã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯12æ™‚ã‹ã‚‰13æ™‚ã¾ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ã™ã€‚', hira:'ãŠã—ã‚‰ã›ï¼šãˆã‚Œã¹ãƒ¼ãŸãƒ¼ã¯ ã˜ã‚…ã†ã«ã˜ã‹ã‚‰ ã˜ã‚…ã†ã•ã‚“ã˜ã¾ã§ ã‚ã‚“ã¦ãªã‚“ã™ã§ã™ã€‚' },
      { en:'Email: Please submit your receipts by Friday to follow company policy.', ja:'ãƒ¡ãƒ¼ãƒ«ï¼šä¼šç¤¾ã®è¦å®šã«å¾“ã„ã€é‡‘æ›œæ—¥ã¾ã§ã«é ˜åæ›¸ã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚', hira:'ã‚ãƒ¼ã‚‹ï¼šã‹ã„ã—ã‚ƒã® ãã¦ã„ã« ã—ãŸãŒã„ã€ãã‚“ã‚ˆã†ã³ ã¾ã§ã« ã‚Šã‚‡ã†ã—ã‚…ã†ã—ã‚‡ã‚’ ã¦ã„ã—ã‚…ã¤ ã—ã¦ãã ã•ã„ã€‚' },
      { en:'Announcement: The department meeting will start at 9:15 in Room B.', ja:'æ¡ˆå†…ï¼šéƒ¨ç½²ä¼šè­°ã¯9æ™‚15åˆ†ã«Bå®¤ã§é–‹å§‹ã—ã¾ã™ã€‚', hira:'ã‚ã‚“ãªã„ï¼šã¶ã—ã‚‡ ã‹ã„ãã¯ ãã˜ ã˜ã‚…ã†ã”ãµã‚“ã« ã³ãƒ¼ã—ã¤ã§ ã‹ã„ã— ã—ã¾ã™ã€‚' },
      { en:'Reminder: Attach the brochure when replying to customers.', ja:'ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼šãŠå®¢æ§˜ã¸è¿”ä¿¡ã™ã‚‹éš›ã¯ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚', hira:'ã‚Šã¾ã„ã‚“ã ãƒ¼ï¼šãŠãã‚ƒãã•ã¾ã¸ ã¸ã‚“ã—ã‚“ ã™ã‚‹ ã•ã„ã¯ ã±ã‚“ãµã‚Œã£ã¨ã‚’ ã¦ã‚“ã· ã—ã¦ãã ã•ã„ã€‚' },
      { en:'Update: The shipment has been delayed due to bad weather.', ja:'é€£çµ¡ï¼šæ‚ªå¤©å€™ã®ãŸã‚å‡ºè·ãŒé…ã‚Œã¦ã„ã¾ã™ã€‚', hira:'ã‚Œã‚“ã‚‰ãï¼šã‚ãã¦ã‚“ã“ã†ã® ãŸã‚ ã—ã‚…ã£ã‹ãŒ ãŠãã‚Œã¦ ã„ã¾ã™ã€‚' },
      { en:'Memo: Please use Conference Room 2 for interviews today.', ja:'ãƒ¡ãƒ¢ï¼šæœ¬æ—¥ã®é¢æ¥ã¯ä¼šè­°å®¤2ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚', hira:'ã‚ã‚‚ï¼šã»ã‚“ã˜ã¤ã® ã‚ã‚“ã›ã¤ã¯ ã‹ã„ãã—ã¤ ã« ã‚’ ã—ã‚ˆã† ã—ã¦ãã ã•ã„ã€‚' },
      { en:'Poster: New customers receive a 10% discount this month.', ja:'ãƒã‚¹ã‚¿ãƒ¼ï¼šä»Šæœˆã¯æ–°è¦ã®ãŠå®¢æ§˜ã«10ï¼…å‰²å¼•ã€‚', hira:'ã½ã™ãŸãƒ¼ï¼šã“ã‚“ã’ã¤ã¯ ã—ã‚“ãã® ãŠãã‚ƒãã•ã¾ã« ã˜ã‚…ã£ã±ãƒ¼ã›ã‚“ã¨ ã‚ã‚Šã³ãã€‚' },
      { en:'Message: Can we reschedule the appointment for next week?', ja:'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼šäºˆç´„ã‚’æ¥é€±ã«äºˆå®šå¤‰æ›´ã§ãã¾ã™ã‹ã€‚', hira:'ã‚ã£ã›ãƒ¼ã˜ï¼šã‚ˆã‚„ãã‚’ ã‚‰ã„ã—ã‚…ã†ã« ã‚ˆã¦ã„ ã¸ã‚“ã“ã† ã§ãã¾ã™ã‹ã€‚' },
      { en:'Guide: Leave feedback at the front desk after the training.', ja:'æ¡ˆå†…ï¼šç ”ä¿®å¾Œã¯å—ä»˜ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æ®‹ã—ã¦ãã ã•ã„ã€‚', hira:'ã‚ã‚“ãªã„ï¼šã‘ã‚“ã—ã‚…ã†ã”ã¯ ã†ã‘ã¤ã‘ã§ ãµãƒãƒ¼ã©ã°ã£ãã‚’ ã®ã“ã—ã¦ ãã ã•ã„ã€‚' },
      { en:'Note: The cafeteria will be closed on Monday.', ja:'æ³¨æ„ï¼šé£Ÿå ‚ã¯æœˆæ›œæ—¥ã«ä¼‘æ¥­ã—ã¾ã™ã€‚', hira:'ã¡ã‚…ã†ã„ï¼šã—ã‚‡ãã©ã†ã¯ ã’ã¤ã‚ˆã†ã³ã« ãã‚…ã†ãã‚‡ã† ã—ã¾ã™ã€‚' },
      { en:'Schedule: Deliver the invoice and contract before 5 p.m.', ja:'äºˆå®šï¼šåˆå¾Œ5æ™‚ã¾ã§ã«è«‹æ±‚æ›¸ã¨å¥‘ç´„æ›¸ã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚', hira:'ã‚ˆã¦ã„ï¼šã”ã” ã”ã˜ ã¾ã§ã« ã›ã„ãã‚…ã†ã—ã‚‡ã¨ ã‘ã„ã‚„ãã—ã‚‡ã‚’ ã¦ã„ã—ã‚…ã¤ ã—ã¦ãã ã•ã„ã€‚' },
      { en:'Direction: The supplierâ€™s office is next to the main entrance.', ja:'æ¡ˆå†…ï¼šç´å…¥æ¥­è€…ã®ã‚ªãƒ•ã‚£ã‚¹ã¯æ­£é¢å…¥å£ã®éš£ã§ã™ã€‚', hira:'ã‚ã‚“ãªã„ï¼šã®ã†ã«ã‚…ã† ãã‚‡ã†ã—ã‚ƒã® ãŠãµãƒã™ã¯ ã—ã‚‡ã†ã‚ã‚“ ã„ã‚Šãã¡ã® ã¨ãªã‚Šã§ã™ã€‚' },
    ];

    // -------------- State & Elements --------------
    let deck = [];
    let index = 0;
    let showingFront = true;

    const els = {
      mode: document.getElementById('mode'),
      card: document.getElementById('card'),
      label: document.getElementById('label'),
      main: document.getElementById('main'),
      sub: document.getElementById('sub'),
      hira: document.getElementById('hira'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnFlip: document.getElementById('btnFlip'),
      btnShuffle: document.getElementById('btnShuffle'),
      mcArea: document.getElementById('mcArea'),
    };

    // -------------- Helpers --------------
    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}
      return arr;
    }
    function uniqueAnswersFromQuiz(){
      const set = new Set();
      QUIZ.forEach(q => q.answers.forEach(a => set.add(a.toLowerCase())));
      return Array.from(set);
    }
    const ALL_QUIZ_WORDS = uniqueAnswersFromQuiz();

    function mcOptionsFor(item, n=4){
      const corrects = item.answers.map(a=>a.toLowerCase());
      const correct = corrects[0];
      const pool = ALL_QUIZ_WORDS.filter(v => !corrects.includes(v));
      shuffle(pool);
      const need = Math.max(0, n-1);
      const choices = [correct, ...pool.slice(0, need)];
      return shuffle(choices);
    }

    // -------------- Build Decks --------------
    function buildDeck(){
      const mode = els.mode.value;
      if(mode==='vocab-j2e' || mode==='vocab-e2j'){
        deck = VOCAB.map(x=>({
          type:'vocab',
          front: mode==='vocab-j2e' ? x.ja : x.en,
          back:  mode==='vocab-j2e' ? x.en : x.ja,
          hira: x.hira,
          sideLabelFront: mode==='vocab-j2e' ? 'Japanese â†’ English' : 'English â†’ Japanese',
          sideLabelBack:  mode==='vocab-j2e' ? 'English' : 'Japanese',
        }));
      } else if(mode==='sentences'){
        deck = SENTENCES.map(s=>({
          type:'sentence',
          front: s.ja,
          back: s.en + '\n' + s.ja,
          hira: s.hira,
          sideLabelFront: 'Japanese sentence',
          sideLabelBack: 'Answer (EN + JA)',
        }));
      } else if(mode==='qa'){
        deck = QA.map(q=>({
          type:'qa',
          front: q.q_ja,
          back: q.a_en + '\n' + q.a_ja,
          hira: q.q_hira + '\n' + q.a_hira,
          sideLabelFront: 'Question (JA)',
          sideLabelBack: 'Answer (EN + JA)',
        }));
      } else if(mode==='quiz'){
        deck = QUIZ.map(q=>{
          const choices = mcOptionsFor(q, 4);
          return {
            type:'quiz',
            front: q.cloze,
            back: q.full + '\n' + q.ja,
            hira: q.hira,
            answers: q.answers,
            choices,
            sideLabelFront: 'Choose the missing word',
            sideLabelBack: 'Answer (EN + JA)',
          };
        });
      } else if(mode==='reading'){
        deck = READING.map(r=>({
          type:'reading',
          front: r.en,
          back: r.en + '\n' + r.ja,
          hira: r.hira,
          sideLabelFront: 'Reading (EN)',
          sideLabelBack: 'Reading (EN + JA)',
        }));
      }
      index = 0; showingFront = true; render();
    }

    // -------------- Render --------------
    function render(){
      if(deck.length===0){ els.main.textContent='â€”'; els.sub.textContent='No cards'; els.counter.textContent='0 / 0'; return; }
      const item = deck[index];
      const mode = els.mode.value;
      els.label.textContent = showingFront ? item.sideLabelFront : item.sideLabelBack;
      const content = showingFront ? item.front : item.back;

      // Main content & JA + hira logic
      if((!showingFront) && (item.type==='qa' || item.type==='quiz' || item.type==='sentence' || item.type==='reading') && content.includes('\n')){
        const [line1, line2] = content.split('\n'); // EN, JA
        els.main.innerHTML = `<div style="font-size:22px;font-weight:700" class="${item.type==='reading'?'small':''}">${line1}</div>
                              <div class="sub ${item.type==='reading'?'small':''}" style="margin-top:8px">${line2}</div>`;
        if(item.hira){
          els.hira.classList.remove('hidden');
          if(item.type==='qa'){
            const parts = item.hira.split('\n');
            const hiraToShow = showingFront ? parts[0] : (parts[1] || '');
            els.hira.textContent = hiraToShow;
          } else {
            els.hira.textContent = item.hira;
          }
        } else { els.hira.classList.add('hidden'); els.hira.textContent=''; }
      } else {
        els.main.innerHTML = `<div class="${item.type==='reading'?'small':''}">${content}</div>`;
        if(showingFront && (item.type==='vocab' && els.mode.value==='vocab-j2e' || item.type==='sentence' || item.type==='qa')){
          if(item.hira){
            els.hira.classList.remove('hidden');
            if(item.type==='qa' && item.hira.includes('\n')){
              els.hira.textContent = item.hira.split('\n')[0];
            } else {
              els.hira.textContent = item.hira;
            }
          } else { els.hira.classList.add('hidden'); els.hira.textContent=''; }
        } else {
          els.hira.classList.add('hidden');
          els.hira.textContent='';
        }
      }

      // QUIZ MC only on front of quiz
      if(mode==='quiz' && item.type==='quiz' && showingFront){
        els.sub.textContent = 'Choose the correct word.';
        els.mcArea.classList.remove('hidden');
        els.mcArea.innerHTML = '';
        item.choices.forEach(opt => {
          const btn = document.createElement('button');
          btn.className = 'optbtn';
          btn.textContent = opt;
          btn.addEventListener('click', (e)=>{
            e.preventDefault(); e.stopPropagation();
            const norm = (s)=>s.toLowerCase().trim();
            const isCorrect = item.answers.map(a=>norm(a)).includes(norm(opt));
            if(isCorrect){
              btn.classList.add('ok');
              const allBtns = [...els.mcArea.querySelectorAll('button')];
              allBtns.forEach(b=>b.disabled=true);
              setTimeout(()=>{ showingFront = false; render(); }, 350);
            } else {
              btn.classList.add('bad');
              btn.disabled = true;
            }
          }, { passive:false });
          els.mcArea.appendChild(btn);
        });
      } else {
        els.mcArea.classList.add('hidden');
        els.mcArea.innerHTML = '';
        if(item.type==='quiz' && showingFront){
          els.sub.textContent = 'Choose the correct word.';
        } else {
          els.sub.textContent = 'Tap / Space to flip Â· Swipe / â† â†’ to navigate';
        }
      }

      // Footer counters
      els.counter.textContent = `${index+1} / ${deck.length}`;
      els.bar.style.width = `${((index+1)/deck.length)*100}%`;

      setHash();
    }

    // -------------- Navigation --------------
    function prev(){ index = (index-1+deck.length)%deck.length; showingFront=true; render(); }
    function next(){ index = (index+1)%deck.length; showingFront=true; render(); }
    function flip(){ showingFront = !showingFront; render(); }
    function shuffleDeck(){ deck = shuffle(deck); index=0; showingFront=true; render(); }

    // -------------- URL Hash --------------
    function setHash(){ location.hash = `#${els.mode.value}:${index}`; }
    function readHash(){
      const h = location.hash.replace('#','');
      if(!h) return;
      const [m, i] = h.split(':');
      if(m && [...els.mode.options].some(o=>o.value===m)) els.mode.value = m;
      if(i && !Number.isNaN(+i)) index = Math.max(0, Math.min(deck.length-1, +i));
    }

    // -------------- Events --------------
    els.mode.addEventListener('change', ()=>{ buildDeck(); setHash(); });
    document.getElementById('btnPrev').addEventListener('click', prev);
    document.getElementById('btnNext').addEventListener('click', next);
    document.getElementById('btnFlip').addEventListener('click', flip);
    document.getElementById('btnShuffle').addEventListener('click', shuffleDeck);

    // Keyboard
    window.addEventListener('keydown', (e)=>{
      if(e.code==='ArrowLeft'){ e.preventDefault(); prev(); }
      else if(e.code==='ArrowRight'){ e.preventDefault(); next(); }
      else if(e.code==='Space'){ e.preventDefault(); flip(); }
      else if(e.key==='S' || e.key==='s'){ e.preventDefault(); shuffleDeck(); }
      else if(e.key==='1' && els.mode.value==='quiz'){ const b=els.mcArea.querySelectorAll('button')[0]; if(b) b.click(); }
      else if(e.key==='2' && els.mode.value==='quiz'){ const b=els.mcArea.querySelectorAll('button')[1]; if(b) b.click(); }
      else if(e.key==='3' && els.mode.value==='quiz'){ const b=els.mcArea.querySelectorAll('button')[2]; if(b) b.click(); }
      else if(e.key==='4' && els.mode.value==='quiz'){ const b=els.mcArea.querySelectorAll('button')[3]; if(b) b.click(); }
    });

    // Click/Touch to flip (disabled on Quiz front)
    document.getElementById('card').addEventListener('click', (e)=>{
      if(els.mode.value==='quiz' && showingFront) return;
      flip();
    }, { passive:true });

    // Swipe
    let touchStartX=null, touchStartY=null;
    document.getElementById('card').addEventListener('touchstart', (e)=>{
      const t=e.changedTouches[0]; touchStartX=t.clientX; touchStartY=t.clientY;
    }, {passive:true});
    document.getElementById('card').addEventListener('touchend', (e)=>{
      const t=e.changedTouches[0]; if(touchStartX===null) return;
      const dx=t.clientX - touchStartX; const dy=t.clientY - touchStartY;
      if(Math.abs(dx)>50 && Math.abs(dx)>Math.abs(dy)){
        if(dx>0) prev(); else next();
      } else if(Math.abs(dy)<10 && Math.abs(dx)<10){
        if(!(els.mode.value==='quiz' && showingFront)) flip();
      }
      touchStartX=touchStartY=null;
    }, {passive:true});

    // Init
    buildDeck();
    readHash();
    render();
  </script>
</body>
</html>
